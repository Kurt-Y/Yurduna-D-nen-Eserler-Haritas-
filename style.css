/* 1. CORE LAYOUT & THEME */
:root { --background-color: #f4f4f4; --text-color: #333; --control-bg: white; --control-border: #ccc; --modal-bg: white; --popup-border: #eee; --primary-color: #007bff; --secondary-color: #6c757d; --highlight-bg: #e9ecef; }
body.dark-mode { --background-color: #1e1e1e; --text-color: #ddd; --control-bg: #333; --control-border: #555; --modal-bg: #2b2b2b; --popup-border: #444; --primary-color: #0d6efd; --secondary-color: #6c757d; --highlight-bg: #343a40; }
html, body, #map { height: 100%; width: 100%; margin: 0; padding: 0; overflow: hidden; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; transition: background-color 0.3s, color 0.3s; }
body { background-color: var(--background-color); color: var(--text-color); }
.quiz-active, .quiz-active .leaflet-container { cursor: crosshair !important; }

/* 2. CUSTOM CURSOR */
body, .leaflet-container, .leaflet-marker-icon, .leaflet-popup { cursor: url('imlec.png') 16 16, auto !important; }

/* 3. SEARCH BAR & CONTROLS */
#search-container, #controls-container, #settings-container { position: absolute; z-index: 1050; }
#search-container { top: 10px; left: 50%; transform: translateX(-50%); width: 400px; max-width: 90%; }
#controls-container { top: 10px; left: 10px; display: flex; gap: 8px; }
#settings-container { top: 10px; right: 10px; display: flex; gap: 8px; }
.leaflet-top.leaflet-right { top: 60px; z-index: 1050; }
.search-wrapper { position: relative; width: 100%; }
#search-input { width: 100%; height: 45px; padding: 0 15px 0 45px; font-size: 16px; border: 1px solid var(--control-border); border-radius: 25px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); background-color: var(--control-bg); color: var(--text-color); box-sizing: border-box; }
.search-icon { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #999; }
#search-results-container { margin-top: 8px; background-color: var(--control-bg); border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); max-height: 50vh; overflow-y: auto; }
.search-result-item { padding: 12px 15px; border-bottom: 1px solid var(--popup-border); cursor: pointer; text-align: left; }
.search-result-item:hover { background-color: var(--highlight-bg); }
.control-btn { width: 40px; height: 40px; padding: 0; border: 1px solid var(--control-border); border-radius: 8px; font-size: 18px; background-color: var(--control-bg); color: var(--text-color); box-shadow: 0 2px 6px rgba(0,0,0,0.2); display: flex; justify-content: center; align-items: center; cursor: pointer; }

/* 4. SETTINGS DROPDOWN */
#settings-dropdown { position: absolute; top: 50px; right: 0; background: var(--modal-bg); padding: 15px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); width: 220px; z-index: 1051; }
.hidden { display: none !important; }
.setting-group { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid var(--control-border); }
.setting-group:last-child { border-bottom: none; }
.setting-group > label { font-weight: bold; display: block; margin-bottom: 8px; }
.switch-container { display: flex; align-items: center; justify-content: space-between; }
.switch-label { font-size: 12px; color: #888; }
.switch-label.active { color: var(--text-color); font-weight: bold; }
.switch { position: relative; display: inline-block; width: 48px; height: 24px; margin: 0 5px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 24px; }
.slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
input:checked + .slider { background-color: var(--primary-color); }
input:checked + .slider:before { transform: translateX(24px); }

/* 5. GENERAL MODAL STYLES */
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.8); z-index: 2000; }
.tutorial-step { position: absolute; background-color: var(--modal-bg); padding: 20px; border-radius: 8px; box-shadow: 0 0 20px rgba(0,0,0,0.5); z-index: 2001; width: 320px; border: 2px solid var(--primary-color); display: none; }
.tutorial-next, .tutorial-end { padding: 8px 15px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 15px; width: 100%; }
.tutorial-skip { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: none; border: none; color: #ccc; cursor: pointer; text-decoration: underline; z-index: 2002; }
#filter-modal { position: absolute; top: 60px; left: 10px; z-index: 1101; background: var(--modal-bg); color: var(--text-color); padding: 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); width: 320px; }
.button-group { display: flex; justify-content: space-between; margin-top: 20px; }
.button-group button { width: 48%; padding: 10px; border: none; border-radius: 4px; color: white; font-size: 16px; cursor: pointer; }
#apply-filter-btn { background-color: var(--primary-color); }
#reset-filter-btn { background-color: var(--secondary-color); }
.checkbox-container { max-height: 100px; overflow-y: auto; border: 1px solid var(--control-border); padding: 10px; border-radius: 4px; }
.filter-group { margin-bottom: 10px; }

/* 6. POPUP STYLING & 3D ICON */
.leaflet-popup-content-wrapper, .leaflet-popup-tip { background: var(--modal-bg) !important; color: var(--text-color) !important; }
.leaflet-popup-content { text-align: left; font-size: 14px; line-height: 1.5; }
.popup-image-container { position: relative; width: fit-content; margin: 0 auto 10px auto; }
.popup-image { max-width: 200px; width: 100%; height: auto; border-radius: 5px; display: block; }
.popup-3d-icon { position: absolute; bottom: 8px; right: 8px; background-color: rgba(0, 0, 0, 0.6); color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 16px; cursor: pointer; z-index: 10; }

/* 7. 3D MODEL VIEWER MODAL */
#model-viewer-modal { background-color: rgba(0, 0, 0, 0.9); display: flex; justify-content: center; align-items: center;}
#artifact-model { width: 90%; height: 90%; border: none; --progress-bar-color: #fff; }
.close-modal-btn { position: absolute; top: 20px; right: 20px; font-size: 35px; color: #fff; background: none; border: none; cursor: pointer; z-index: 2001; }

/* 8. TUTORIAL POSITIONS (Orta ve Büyük Ekranlar İçin Konumlar) */
#intro-tour-overlay .tutorial-step[data-step="1"],
#intro-tour-overlay .tutorial-step[data-step="4"],
#tutorial-overlay .tutorial-step[data-step="1"],
#tutorial-overlay .tutorial-step[data-step="2"] { top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; }
#intro-tour-overlay .tutorial-step[data-step="2"] { top: 60px; left: 15px; }
#intro-tour-overlay .tutorial-step[data-step="3"] { top: 60px; right: 15px; }
#tutorial-overlay .tutorial-step[data-step="3"] { top: 70px; left: 50%; transform: translateX(-50%); } 
#tutorial-overlay .tutorial-step[data-step="4"] { top: 60px; left: 65px; } 
#tutorial-overlay .tutorial-step[data-step="5"] { top: 60px; left: 15px; } 
#tutorial-overlay .tutorial-step[data-step="6"] { top: 60px; right: 15px; }
#tutorial-overlay .tutorial-step[data-step="7"] { top: 110px; right: 15px; } 

/* 9. QUIZ PANEL STYLES */
#quiz-panel { position: absolute; top: 60px; left: 10px; width: 280px; background-color: var(--modal-bg); color: var(--text-color); border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); padding: 20px; z-index: 1050; text-align: center; }
#quiz-panel h3 { margin: 0 0 10px; }
#quiz-panel p { font-size: 14px; line-height: 1.5; margin: 0 0 15px; }
#quiz-panel button { width: 100%; padding: 10px; border: none; border-radius: 4px; color: white; font-size: 16px; cursor: pointer; background-color: var(--primary-color); }
#end-quiz-btn, #play-again-btn { background-color: var(--secondary-color); margin-top: 10px; }
.quiz-header { display: flex; justify-content: space-between; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid var(--control-border); }
.quiz-stat span { display: block; }
.quiz-stat span:first-child { font-weight: bold; font-size: 12px; color: #888; }
#quiz-score, #quiz-question-counter { font-weight: bold; font-size: 18px; }
#quiz-question-text { font-weight: bold; font-size: 15px; }
#quiz-hint-text { font-size: 12px; font-style: italic; color: #888; border-top: 1px solid var(--control-border); padding-top: 10px; margin-top: 15px; }
/* YENİ EKLENMESİ GEREKEN KOD: Hoş Geldiniz Ekranı Stilleri */
.overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.75); /* Yarı saydam arka plan */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000; /* Tüm elementlerin üzerinde olmalı */
}

.welcome-box {
    background-color: #fff;
    color: #333;
    padding: 30px;
    border-radius: 10px;
    max-width: 500px;
    text-align: center;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.welcome-box h1 {
    color: #007bff;
    margin-top: 0;
    font-size: 1.8em;
}

.welcome-box p {
    font-size: 1.1em;
    line-height: 1.6;
    margin-bottom: 30px;
}

.welcome-buttons {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.main-button {
    background-color: #007bff;
    color: white;
    padding: 12px 25px;
    border: none;
    border-radius: 5px;
    font-size: 1.1em;
    cursor: pointer;
    transition: background-color 0.3s;
}

.main-button:hover {
    background-color: #0056b3;
}

.secondary-button {
    background-color: #6c757d;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    font-size: 1em;
    cursor: pointer;
    transition: background-color 0.3s;
}

.secondary-button:hover {
    background-color: #5a6268;
}

/* ========================================================== */
/* 10. MOBİL UYARLAMA (Media Queries) */
/* ========================================================== */
@media (max-width: 768px) {
    
    /* 3. SEARCH BAR & CONTROLS */
    #search-container {
        width: calc(100% - 100px); /* Kontrol butonları için yer bırak */
        left: 50%;
        transform: translateX(-50%);
        top: 60px; /* Kontrol butonlarının altına al */
    }

    #controls-container {
        top: 10px;
        left: 10px;
    }

    #settings-container {
        top: 10px;
        right: 10px;
        gap: 5px;
    }
    
    .control-btn {
        width: 35px;
        height: 35px;
        font-size: 16px;
    }

    /* 4. SETTINGS DROPDOWN */
    #settings-dropdown {
        top: 50px;
        right: 0;
        left: auto;
        width: 200px;
        padding: 10px;
    }
    
    /* 5. GENERAL MODAL STYLES */
    #filter-modal {
        top: 115px; /* Kontroller ve arama çubuğunun altına al */
        left: 50%;
        transform: translateX(-50%);
        width: 95%;
        max-width: 380px;
        padding: 15px;
    }
    
    .checkbox-container {
        max-height: 120px; /* Mobil için biraz daha uzun */
    }

    /* 9. QUIZ PANEL STYLES */
    #quiz-panel {
        top: 115px; /* Filtre menüsü ile aynı seviyede olabilir */
        left: 50%;
        transform: translateX(-50%);
        width: 95%;
        max-width: 380px;
        padding: 15px;
    }

    /* 6. POPUP STYLING */
    .leaflet-popup-content {
        max-width: 280px !important;
        font-size: 13px;
    }

    .popup-image {
        max-width: 150px;
    }
    
    /* 8. TUTORIAL POSITIONS (Mobil cihazlarda ortala) */
    .tutorial-step {
        width: 90%;
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
        top: 50% !important;
        text-align: center;
    }

    #intro-tour-overlay .tutorial-step[data-step="2"],
    #intro-tour-overlay .tutorial-step[data-step="3"] {
        top: 50% !important; 
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
    }
}